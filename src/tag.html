<html>
    <head>
        <style>
            body *{
                font-family: monospace;
            }
        </style>
        <script>
            window.onload = () =>{
                document.getElementById("opt");
                opt.onchange = () =>{
                    if(opt.value == "Write tag"){
                        document.getElementById("writeTag").style.display="block";
                        document.getElementById("readTag").style.display="none";
                    }else{
                        document.getElementById("writeTag").style.display="none";
                        document.getElementById("readTag").style.display="block";
                    }
                }
                function xhr(method, url, data, cb){
                    let x = new XMLHttpRequest();
                    x.open(method, url);
                    x.onloadend= ()=>{
                        cb(x.responseText, x.status);
                    }
                    x.send(data);
                }
                let rt = document.getElementById("rt");
                let rtt = document.getElementById("rtt");
                let wt = document.getElementById("wt");
                let wtt = document.getElementById("wtt");
                let wttt = document.getElementById("wttt");
                
                rt.onclick = ()=>{
                    rtt.innerHTML = "Wait...";
                    xhr("GET", "/arduino", null, (data, status)=>{
                        if(status === 200){
                            rtt.innerHTML = JSON.parse(data)['data'];
                        }else{
                            rtt.innerHTML = "AN ERROR OCCURED";
                        }
                    });
                }
                
                wt.onclick = () =>{
                    wttt.innerHTML = "Wait...";
                    let json = JSON.stringify({id: wtt.value});
                    xhr("POST", "/arduino", json, (data, status)=>{
                        if(status ==200){
                            wttt.innerHTML = "SUCCESS";
                        }else{
                            wttt.innerHTML = "ERROR";
                        }
                    });
                }
                
            }
        </script>
    </head>
    <body>
        <select id="opt" >
            <option>Read tag</option>
            <option>Write tag</option>
        </select>
        <br/>
        <br/>
        <div id="readTag">
            <button id=rt>Read tag</button><br/>
            <span id=rtt></span>
        </div>
        <div id="writeTag" style="display: none">
            <input id=wtt type="number" max="99999999">
            <button id=wt >Write Tag</button>
            <span id=wttt ></span>
        </div>
    </body>
</html>